From 1d0b41981e2eeec5e4070f3d181b6ffcc0463d7c Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 20 Oct 2017 19:43:38 -0400
Subject: [PATCH] Prevent Pathfinding out of World Border

This prevents Entities from trying to run outside of the World Border

diff --git a/src/main/java/net/minecraft/pathfinding/PathNavigate.java b/src/main/java/net/minecraft/pathfinding/PathNavigate.java
index 90b156f..ab2ff33 100644
--- a/src/main/java/net/minecraft/pathfinding/PathNavigate.java
+++ b/src/main/java/net/minecraft/pathfinding/PathNavigate.java
@@ -79,6 +79,7 @@ public abstract class PathNavigate {
 
     @Nullable
     public Path getPathToPos(BlockPos pos) {
+        if (!entity.getEntityWorld().getWorldBorder().contains(pos)) return null; // Paper - don't path out of world border
         if (!this.canNavigate()) {
             return null;
         } else if (this.currentPath != null && !this.currentPath.isFinished() && pos.equals(this.targetPos)) {
@@ -103,6 +104,7 @@ public abstract class PathNavigate {
             return null;
         } else {
             BlockPos var2 = new BlockPos(entityIn);
+            if (!entity.getEntityWorld().getWorldBorder().contains(var2)) return null; // Paper - don't path out of world border
 
             if (this.currentPath != null && !this.currentPath.isFinished() && var2.equals(this.targetPos)) {
                 return this.currentPath;
-- 
2.14.2.windows.2

